{"version":3,"file":"Releases-B8RoHAuf.js","sources":["../../src/pages/Releases/Releases.vue"],"sourcesContent":["<template>\r\n    <PageHeader :title=\"t(`pages.releases.title`)\"\r\n        :detail=\"!!data.selectedReleases?.length\"\r\n        id=\"item-head-buttons\"\r\n        v-show=\"!data.releaseEditorMode && !data.trackEditorMode && !data.licenseTrackEditorMode\"\r\n    />\r\n\r\n    <div class=\"box\" v-show=\"!data.releaseEditorMode && !data.trackEditorMode && !data.licenseTrackEditorMode\">\r\n        <div class=\"item-detail\">\r\n            <Releases\r\n                :canAdd=\"false\"\r\n                @select=\"onSelectReleases\"\r\n                @add=\"addReleases\"\r\n                @edit=\"editReleases\"\r\n                @editTracks=\"editReleaseTracks\"\r\n                @editTracksLicenses=\"editReleaseTracksLicenses\"\r\n                ref=\"releases\"\r\n            />\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÐ»Ð¸Ð·Ð¾Ð² -->\r\n    <ReleaseEditor v-if=\"data.releaseEditorMode\"\r\n        :items=\"data.editorReleases\"\r\n        ref=\"releaseEditor\"\r\n        @remove=\"onRemoveRelease\"\r\n        @update=\"onUpdateRelease\"\r\n        @add=\"onAddRelease\"\r\n        @close=\"closeReleaseEditorMode\"\r\n    />\r\n\r\n    <!-- Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ‚Ñ€ÐµÐºÐ¾Ð² -->\r\n    <TrackEditor v-if=\"data.trackEditorMode\"\r\n        :release=\"data.editorReleases?.length ? data.editorReleases[0] : null\"\r\n        :items=\"data.editorTracks\"\r\n        ref=\"trackEditor\"\r\n        @remove=\"\"\r\n        @update=\"\"\r\n        @add=\"\"\r\n        @close=\"closeTrackEditorMode\"\r\n    />\r\n\r\n    <!-- Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð»Ð¸Ñ†ÐµÐ½Ð·Ð¸Ð¹ Ñ‚Ñ€ÐµÐºÐ¾Ð² -->\r\n    <LicenseTrackEditor v-if=\"data.licenseTrackEditorMode\"\r\n        :artist=\"data.item\"\r\n        :release=\"data.editorReleases?.length ? data.editorReleases[0] : null\"\r\n        :items=\"data.editorTracks\"\r\n        ref=\"licenseTrackEditor\"\r\n        @close=\"closeLicenseTrackEditorMode\"\r\n    />\r\n</template>\r\n\r\n<script setup>\r\n    import { reactive, computed, ref } from 'vue';\r\n    import PageHeader from '@/components/blocks/PageHeader/PageHeader.vue';\r\n\r\n    import Releases from '@/components/blocks/Releases.vue';\r\n    import ReleaseEditor from '@/components/blocks/ReleaseEditor/ReleaseEditor.vue';\r\n    import TrackEditor from '@/components/blocks/TrackEditor/TrackEditor.vue';\r\n    import LicenseTrackEditor from '@/components/blocks/LicenseTrackEditor/LicenseTrackEditor.vue';\r\n    import api from 'ðŸ”—/api';\r\n\r\n    import { useI18n } from 'vue-i18n';\r\n\r\n    const { t } = useI18n();\r\n    const releases = ref(null)\r\n    const releaseEditor = ref(null);\r\n    const licenseTrackEditor = ref(null);\r\n    const trackEditor = ref(null);\r\n\r\n    const data = reactive({\r\n        releaseEditorMode: false,\r\n        editorReleases: null,\r\n        trackEditorMode: false,\r\n        editorTracks: null,\r\n        selectedReleases: null\r\n    });\r\n\r\n    // Releases\r\n    const onSelectReleases = (releases) => {\r\n        data.selectedReleases = releases?.length ? releases : null;\r\n    }\r\n\r\n    const addReleases = (count) => {\r\n        data.releaseEditorMode = true;\r\n\r\n        // \r\n        setTimeout(() => {\r\n            releaseEditor.value?.create(count || 1);\r\n        });\r\n    }\r\n\r\n    const editReleases = (releases) => {\r\n        data.editorReleases = releases;\r\n        data.releaseEditorMode = true;\r\n    }\r\n\r\n    const editReleaseTracks = async (release) => {\r\n        const payload = await api.releases().tracks.list(release.id);\r\n\r\n        data.editorTracks = payload?.items || [];\r\n        data.editorReleases = [...(data.selectedReleases || [])];\r\n        data.trackEditorMode = true;\r\n    }\r\n\r\n    const editReleaseTracksLicenses = async (release) => {\r\n        const payload = await api.releases().tracks.list(release.id);\r\n\r\n        data.editorTracks = payload?.items || [];\r\n        data.editorReleases = [...(data.selectedReleases || [])];\r\n        data.licenseTrackEditorMode = true;\r\n    }\r\n\r\n    const closeReleaseEditorMode = () => {\r\n        data.releaseEditorMode = false;\r\n    }\r\n        // Events\r\n        const onAddRelease = (release) => {\r\n            if (release?.id) {\r\n                releases.value.addItem(release);\r\n            }\r\n        }\r\n\r\n        const onRemoveRelease = (id) => {\r\n            if (id) {\r\n                releases.value.removeItems([{ id }], true)\r\n            }\r\n        }\r\n\r\n        const onUpdateRelease = (release) => {\r\n            if (release?.id) {\r\n                releases.value.updateItem(release);\r\n            }\r\n        }\r\n\r\n    // Tracks\r\n        const closeTrackEditorMode = () => {\r\n            data.trackEditorMode = false;\r\n        }\r\n\r\n        const closeLicenseTrackEditorMode = () => {\r\n            data.licenseTrackEditorMode = false;\r\n        }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    @include studio.default-box;\r\n</style>\r\n"],"names":["_createVNode","_unref","_withDirectives","_createElementVNode","Releases","_createBlock"],"mappings":"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"}