{"version":3,"file":"Tracks-ClhyI1IV.js","sources":["../../src/pages/Tracks/Tracks.vue"],"sourcesContent":["<template>\r\n    <PageHeader :title=\"t(`pages.tracks.title`)\"\r\n        :detail=\"!!data.editorTracks?.length\"\r\n        id=\"item-head-buttons\"\r\n        v-show=\"!data.trackEditorMode && !data.licenseTrackEditorMode\"\r\n    />\r\n\r\n    <div class=\"box\" v-show=\"!data.trackEditorMode && !data.licenseTrackEditorMode\">\r\n        <div class=\"item-detail\">\r\n            <Tracks\r\n                :canAdd=\"false\"\r\n                @select=\"onSelectTracks\"\r\n                @add=\"addTracks\"\r\n                @edit=\"editTracks\"\r\n                @licenses=\"editTracksLicenses\"\r\n                ref=\"tracks\"\r\n            />\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Редактирование треков -->\r\n    <TrackEditor v-if=\"data.trackEditorMode\"\r\n        :items=\"data.editorTracks\"\r\n        ref=\"trackEditor\"\r\n        @remove=\"onRemoveTrack\"\r\n        @update=\"onUpdateTrack\"\r\n        @add=\"onAddTrack\"\r\n        @close=\"closeTrackEditorMode\"\r\n    />\r\n\r\n    <!-- Редактирование лицензий треков -->\r\n    <LicenseTrackEditor v-if=\"data.licenseTrackEditorMode\"\r\n        :items=\"data.editorTracks\"\r\n        ref=\"licenseTrackEditor\"\r\n        @close=\"closeLicenseTrackEditorMode\"\r\n    />\r\n</template>\r\n\r\n<script setup>\r\n    import { reactive, computed, ref } from 'vue';\r\n    import PageHeader from '@/components/blocks/PageHeader/PageHeader.vue';\r\n\r\n    import Tracks from '@/components/blocks/Tracks.vue';\r\n    import TrackEditor from '@/components/blocks/TrackEditor/TrackEditor.vue';\r\n    import LicenseTrackEditor from '@/components/blocks/LicenseTrackEditor/LicenseTrackEditor.vue';\r\n\r\n    import { useI18n } from 'vue-i18n';\r\n\r\n    const { t } = useI18n();\r\n    const tracks = ref(null)\r\n    const trackEditor = ref(null);\r\n    const licenseTrackEditor = ref(null);\r\n\r\n    const data = reactive({\r\n        trackEditorMode: false,\r\n        licenseTrackEditorMode: false,\r\n        editorTracks: null\r\n    });\r\n\r\n    // Tracks\r\n    const onSelectTracks = (tracks) => {\r\n        data.editorTracks = tracks?.length ? tracks : null;\r\n    }\r\n\r\n    const addTracks = (count) => {\r\n        data.editorTracks = [];\r\n        data.trackEditorMode = true;\r\n\r\n        // \r\n        setTimeout(() => {\r\n            trackEditor.value?.create(count || 1);\r\n        });\r\n    }\r\n\r\n    const editTracks = (tracks) => {\r\n        data.editorTracks = tracks;\r\n        data.trackEditorMode = true;\r\n    }\r\n\r\n    const closeTrackEditorMode = () => {\r\n        data.trackEditorMode = false;\r\n    }\r\n        // Events\r\n        const onAddTrack = (track) => {\r\n            if (track?.id) {\r\n                tracks.value.addItem(track);\r\n            }\r\n        }\r\n\r\n        const onRemoveTrack = (id) => {\r\n            if (id) {\r\n                tracks.value.removeItems([{ id }], true)\r\n            }\r\n        }\r\n\r\n        const onUpdateTrack = (track) => {\r\n            if (track?.id) {\r\n                tracks.value.updateItem(track);\r\n            }\r\n        }\r\n\r\n    const editTracksLicenses = (tracks) => {\r\n        data.editorTracks = tracks;\r\n        data.licenseTrackEditorMode = true;\r\n    }\r\n\r\n    const closeLicenseTrackEditorMode = () => {\r\n        data.licenseTrackEditorMode = false;\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    @include studio.default-box;\r\n</style>\r\n"],"names":["_createVNode","_unref","_vShow","_withDirectives","_createElementVNode","Tracks","_createBlock"],"mappings":"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"}